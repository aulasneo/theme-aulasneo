## mako

<%page expression_filter="h"/>

<%namespace name='static' file='../static_content.html'/>
<%namespace file='../main.html' import="login_query"/>

<%!
from django.conf import settings
from django.urls import reverse
from django.utils.translation import gettext as _

from openedx.core.djangoapps.user_authn.toggles import should_redirect_to_authn_microfrontend
%>

<%
  mktg_site_enabled = static.get_value('ENABLE_MKTG_SITE', settings.FEATURES.get('ENABLE_MKTG_SITE', False))
  courses_are_browsable = settings.FEATURES.get('COURSES_ARE_BROWSABLE')
  allows_login = not settings.FEATURES['DISABLE_LOGIN_BUTTON'] and not combined_login_and_register
  can_discover_courses = settings.FEATURES.get('ENABLE_COURSE_DISCOVERY')
  allow_public_account_creation = static.get_value('ALLOW_PUBLIC_ACCOUNT_CREATION', settings.FEATURES.get('ALLOW_PUBLIC_ACCOUNT_CREATION')) and settings.FEATURES.get('SHOW_REGISTRATION_LINKS', True)
  should_redirect_to_authn_mfe = should_redirect_to_authn_microfrontend()
%>

<div class="home-banner">
  <a href="/">
    <img id="logo-img" class="left-logo" src="${static.url('images/logo-white.png')}" />
  </a>  
    <button class="menu-toggle" onclick="toggleMenu()">☰</button>
    <div class="nav-header">
      <a class="link" href="/">HOME</a>
      <a class="link" href="https://www.aulasneo.com/">ABOUT</a>
      <a class="link" href="${settings.AUTHN_MICROFRONTEND_URL}/register${login_query()}">ENROLL FOR FREE</a>
      <a class="link SignIn" href="${settings.AUTHN_MICROFRONTEND_URL}/login${login_query()}">SIGN IN</a>
    </div>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const banner = document.querySelector('.home-banner');
      const logoImg = document.getElementById('logo-img');
  
      const paginasConScrolled = ['/cookies', '/privacy', '/tos', '/about'];
  
      function cambiarLogoBlanco() {
        logoImg.src = "${static.url('images/logo-white.png')}";
      }
  
      function cambiarLogoColor() {
        logoImg.src = "${static.url('images/logo.png')}";
      }
  
      if (paginasConScrolled.includes(window.location.pathname)) {
        banner.classList.add('scrolled');
        cambiarLogoColor();
      } else {
        window.addEventListener('scroll', function () {
          if (window.scrollY > 50) {
            banner.classList.add('scrolled');
            cambiarLogoColor();
          } else {
            banner.classList.remove('scrolled');
            cambiarLogoBlanco();
          }
        });
      }
  
      banner.addEventListener('mouseenter', function () {
        banner.classList.add('scrolled');
        cambiarLogoColor();
      });
  
      banner.addEventListener('mouseleave', function () {
        if (window.scrollY <= 50 && !paginasConScrolled.includes(window.location.pathname)) {
          banner.classList.remove('scrolled');
          cambiarLogoBlanco();
        }
      });
  
      aplicarEstiloSignIn();
    });


  // Ocultar menú al salir con el mouse
  document.addEventListener('DOMContentLoaded', function () {
      const navHeader = document.querySelector('.nav-header');
      navHeader.addEventListener('mouseleave', function () {
          navHeader.classList.remove('show');
          removeUserLinks();
      });
  });
  
    function aplicarEstiloSignIn() {
      const signInLink = document.querySelector('.nav-header .link[href$="/login"]');
      const navHeader = document.querySelector('.nav-header');
      const isMobile = window.innerWidth <= 768;
      const isMenuOpen = navHeader.classList.contains('show');
  
      if (!signInLink) return;
  
      if (isMobile && isMenuOpen) {
        signInLink.classList.remove('SignIn');
      } else {
        signInLink.classList.add('SignIn');
      }
    }
  
    function toggleMenu() {
      const navHeader = document.querySelector('.nav-header');
      navHeader.classList.toggle('show');
      aplicarEstiloSignIn();
    }
  
    window.addEventListener('resize', function () {
      const navHeader = document.querySelector('.nav-header');
  
      if (window.innerWidth > 768) {
        navHeader.classList.remove('show');
      }
  
      aplicarEstiloSignIn();
    });
  </script>
  